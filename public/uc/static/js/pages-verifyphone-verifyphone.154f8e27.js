(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-verifyphone-verifyphone"],{"1fa9":function(e,t){e.exports={error:"",check:function(e,t){for(var r=0;r<t.length;r++){if(!t[r].checkType)return!0;if(!t[r].name)return!0;if(!t[r].errorMsg)return!0;if(!e[t[r].name])return this.error=t[r].errorMsg,!1;switch(t[r].checkType){case"string":var n=new RegExp("^.{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"int":n=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[r].checkRule+"}$");if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[r].name]))return this.error=t[r].errorMsg,!1;var i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"betweenD":n=/^-?[1-9][0-9]?$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"betweenF":n=/^-?[0-9][0-9]?.+[0-9]+$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;i=t[r].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[t[r].name]>i[1]||e[t[r].name]<i[0])return this.error=t[r].errorMsg,!1;break;case"same":if(e[t[r].name]!=t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"notsame":if(e[t[r].name]==t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"email":n=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"phoneno":n=/^1[0-9]{10,10}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"zipcode":n=/^[0-9]{6}$/;if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"reg":n=new RegExp(t[r].checkRule);if(!n.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"in":if(-1==t[r].checkRule.indexOf(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"notnull":if(null==e[t[r].name]||e[t[r].name].length<1)return this.error=t[r].errorMsg,!1;break}}return!0},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},e664:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[r("v-uni-view",{staticClass:"uni-common-mt"},[r("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)},reset:function(t){t=e.$handleEvent(t),e.formReset(t)}}},[r("v-uni-view",{staticClass:"uni-form-item uni-column"},[r("v-uni-view",{staticClass:"title"},[e._v("手机号：")]),r("v-uni-input",{staticClass:"uni-input",attrs:{name:"phone",type:"number",focus:"",placeholder:"请输入11位手机号码",maxlength:"11"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("v-uni-view",{staticClass:"uni-form-item uni-column"},[r("v-uni-view",{staticClass:"title"},[e._v("验证码：")]),r("v-uni-view",{staticClass:"uni-flex uni-row"},[r("v-uni-view",{staticClass:"flex-item",staticStyle:{width:"60%"}},[r("v-uni-input",{staticClass:"uni-input",attrs:{name:"vcode",type:"number",placeholder:"请输入验证码",maxlength:"4"},model:{value:e.vcode,callback:function(t){e.vcode=t},expression:"vcode"}})],1),r("v-uni-view",{staticClass:"flex-item",staticStyle:{width:"40%"}},[r("v-uni-button",{staticStyle:{"border-radius":"0",padding:"0"},attrs:{disabled:e.btnGetVcodeDisabled,type:e.btnGetVcodeType,size:"default"},on:{click:function(t){t=e.$handleEvent(t),e.sendVcode(t)}}},[e._v(e._s(e.btnGetVcodeText))])],1)],1)],1),r("v-uni-view",{staticClass:"uni-form-item uni-column"},[r("v-uni-view",{staticClass:"title"},[e._v("姓名：")]),r("v-uni-input",{staticClass:"uni-input",attrs:{name:"realname",placeholder:"请输入真实姓名",maxlength:"8",minlength:"2"},model:{value:e.realname,callback:function(t){e.realname=t},expression:"realname"}})],1),r("v-uni-view",[r("v-uni-view",{staticClass:"title"},[e._v("  ")]),r("v-uni-view",{staticClass:"uni-padding-wrap"},[r("v-uni-button",{attrs:{type:"primary",size:"default",formType:"submit"},on:{click:function(t){t=e.$handleEvent(t),e.submitVcode(t)}}},[e._v("提交")])],1)],1)],1)],1)],1)},i=[],o=r("b5fd"),s=r("1fa9"),c={data:function(){return{timer:null,phone:"",vcode:"",realname:"",btnGetVcodeText:"获取验证码",btnGetVcodeType:"warn",btnGetVcodeDisabled:!1,btnGetVcodeTimer:60,formChecked:!1,formRulePhone:{name:"phone",checkType:"phoneno",checkRule:"",errorMsg:"手机号错误"},formRuleVcode:{name:"vcode",checkType:"string",checkRule:"4",errorMsg:"验证码错误"},formRuleRealname:{name:"realname",checkType:"string",checkRule:[2,10],errorMsg:"姓名填写错误"}}},props:{title:{type:String,default:"hello"}},methods:{sendVcode:function(){var e={phone:this.phone},t=[this.formRulePhone],r=s.check(e,t);r?(this.formChecked=!0,uni.showLoading({title:"短信发送中.。."}),uni.setStorageSync("getVcodeTime",Date.parse(new Date)/1e3),this.publicRecordMsg(60),this.recordVcodTimer(60),Object(o["e"])(e).then(function(e){uni.setStorageSync("verificationCode_key",e.key),uni.setStorageSync("verificationCode_expired_at",e.expired_at),console.log(e),uni.hideLoading()}).catch(function(e){alert(e.message)}),console.log("sendVcode:1234")):(this.formChecked=!1,uni.showToast({title:s.error,icon:"none"}))},publicRecordMsg:function(e){this.btnGetVcodeText="("+e+")秒后可重发"},publicTimeoutHandle:function(){this.btnGetVcodeDisabled=!1,this.btnGetVcodeText="获取验证码",uni.removeStorageSync("getVcodeTime")},recordVcodTimer:function(e){var t=this;this.btnGetVcodeDisabled=!0,this.btnGetVcodeTimer=e-1,this.timer=setInterval(function(){t.btnGetVcodeTimer>0?t.publicRecordMsg(t.btnGetVcodeTimer--):(t.publicTimeoutHandle(),clearInterval(t.timer))},1e3)},submitVcode:function(){if(1==this.formChecked){var e={key:uni.getStorageSync("verificationCode_key"),code:this.vcode,realname:this.realname};Object(o["c"])(e).then(function(e){uni.reLaunch({url:"/pages/main/main"})}).catch(function(e){console.log(e),Object(o["a"])({title:"提示",content:e.message,showCancel:!1,cancel_url:"",goto_url:""})}),console.log("get_vcode ==> phone:"+this.phone),console.log("vcode==>"+this.vcode)}else console.log("checked == false")},formSubmit:function(e){var t=e.detail.value,r=[this.formRulePhone,this.formRuleVcode,this.formRuleRealname],n=s.check(t,r);n?this.formChecked=!0:(this.formChecked=!1,uni.showToast({title:s.error,icon:"none"}))},formReset:function(e){console.log("清空数据"),this.chosen=""}},onShow:function(){var e=uni.getStorageSync("getVcodeTime");if(e){var t=Date.parse(new Date)/1e3;this.publicRecordMsg(60-(t-e)),e&&e+60>t?this.recordVcodTimer(60-(t-e)):this.publicTimeoutHandle()}}},a=c,u=r("2877"),l=Object(u["a"])(a,n,i,!1,null,null,null);l.options.__file="verifyphone.vue";t["default"]=l.exports}}]);